基于java提供的锁:
reentrantLock
不能跨jvm,正常互联网项目一般是部署多个节点,这时候reentrantLock无法锁住同一数据库资源

解决:
1. 基于数据库的分布式锁

开两个会话
每个会话将事务设置成手动提交
set @@autocommit=0;
select @@autocommit;

session1
select * from distribute_lock where besiness_code="demo" for update

此时session2 是无法再给这个资源加锁或者修改/删除的(可以查询)

session1
select * from distribute_lock where business_code="demo" for update;
commit

session1
select * from distribute_lock where business_code="demo" for update;
commit